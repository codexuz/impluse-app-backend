import{g as d,p as ke,h,i as Ue,B as Y,c as a,b as t,k as w,e as L,t as r,q as p,v as E,x as V,F as f,l as k,s as _e,d as Ce,f as Ie,Q as Ae,n as N,D as Fe,y as Pe,E as $,C as Le,A as Te,z as Me,o as n,G as De}from"./index-klw2IyYl.js";const Se={class:"p-6"},Ee={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4"},Ve={class:"bg-white rounded-lg shadow p-4 mb-6"},Ne={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},$e=["value"],ze=["disabled"],je=["value"],Be=["disabled"],Oe=["value"],Re=["value"],qe=["value"],Ye={class:"bg-white rounded-lg shadow overflow-hidden"},Qe={class:"overflow-x-auto"},Ge={class:"min-w-full divide-y divide-gray-200"},He={class:"bg-white divide-y divide-gray-200"},Ze={key:0},Je={key:1},Ke={class:"px-6 py-4"},We={class:"text-sm font-medium text-gray-900"},Xe={class:"text-sm text-gray-500 max-w-xs truncate"},et={class:"px-6 py-4 whitespace-nowrap"},tt={class:"text-sm text-gray-900"},st={class:"text-sm text-gray-500"},lt={class:"px-6 py-4 whitespace-nowrap"},ot={key:0,class:"text-sm text-gray-900"},at=["href"],nt={key:1,class:"text-sm text-gray-500"},it={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},rt={class:"px-6 py-4 whitespace-nowrap"},dt=["onClick"],ut={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},ct=["onClick"],mt=["onClick"],vt={key:0,class:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6"},pt={class:"flex items-center justify-between"},ft={class:"flex-1 flex justify-between sm:hidden"},yt=["disabled"],bt=["disabled"],gt={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},xt={class:"text-sm text-gray-700"},wt={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},ht=["disabled"],kt=["onClick"],Ut={key:1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700"},_t=["disabled"],Ct={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},It={class:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white"},At={class:"mt-3"},Ft={class:"flex justify-between items-center mb-4"},Pt={class:"text-lg font-medium text-gray-900"},Lt=["label"],Tt=["value"],Mt={key:0},Dt={key:1},St={key:0},Et={key:1,class:"bg-green-50 rounded-lg p-3"},Vt={class:"flex items-center justify-between"},Nt={class:"flex items-center"},$t={class:"text-left"},zt={class:"text-sm font-medium text-green-800"},jt={class:"text-xs text-green-600"},Bt={key:2,class:"space-y-3"},Ot={class:"flex items-center justify-center"},Rt={class:"text-sm text-gray-600"},qt={class:"w-full bg-gray-200 rounded-full h-2"},Yt={class:"text-xs text-gray-500"},Qt={key:2},Gt={key:0,class:"mt-2 p-2 bg-gray-50 rounded border"},Ht={class:"flex items-center"},Zt={class:"flex justify-end space-x-3 pt-4"},Jt=["disabled"],Kt={key:0,class:"fas fa-spinner fa-spin mr-2"},Wt={key:1},Xt={key:2},es={key:3},ls={__name:"LessonContentsView",setup(ts){const y=d(!1),c=d(""),T=d(""),z=d(!1),I=d(!1),M=d(0),U=d(!1),A=d(!1),b=d([]),g=d([]),_=d([]),D=d([]),x=d(""),v=d(""),C=d(""),u=d(1),F=d(10),J=[5,10,20,50],B=d(!1),O=d(null),o=ke({id:null,title:"",content:"",mediaUrl:"",mediaType:"url",mediaFile:null,order_number:1,lessonId:"",isActive:!0}),R=h(()=>{let l=b.value;if(x.value){const e=g.value.filter(s=>{const i=_.value.find(m=>m.id===s.moduleId);return i&&i.courseId===x.value}).map(s=>s.id);l=l.filter(s=>e.includes(s.lessonId))}if(v.value){const e=g.value.filter(s=>s.moduleId===v.value).map(s=>s.id);l=l.filter(s=>e.includes(s.lessonId))}if(C.value&&(l=l.filter(e=>e.lessonId===C.value)),T.value){const e=T.value.toLowerCase();l=l.filter(s=>s.title.toLowerCase().includes(e)||s.content.toLowerCase().includes(e))}return l.sort((e,s)=>e.order_number-s.order_number)}),K=h(()=>x.value?_.value.filter(l=>l.courseId===x.value):[]),W=h(()=>v.value?g.value.filter(l=>l.moduleId===v.value):[]),S=h(()=>R.value.length),P=h(()=>Math.ceil(S.value/F.value)),j=h(()=>(u.value-1)*F.value),X=h(()=>Math.min(j.value+F.value,S.value)),ee=h(()=>{const l=j.value,e=j.value+F.value;return R.value.slice(l,e)}),te=h(()=>S.value===0?"No items to show":`Showing ${j.value+1} to ${X.value} of ${S.value} contents`),se=async()=>{y.value=!0;try{const l=await $.getAll(),e=l.data||l;b.value=Array.isArray(e)?e:[]}catch(l){c.value=`Failed to fetch lesson contents: ${l.message||"Unknown error"}`,console.error("Error fetching lesson contents:",l),b.value=[]}finally{y.value=!1}},le=async()=>{try{const l=await Le.getAll(),e=l.data||l;g.value=Array.isArray(e)?e:[]}catch(l){console.error("Error fetching lessons:",l),g.value=[]}},oe=async()=>{try{const l=await Te.getAll(),e=l.data||l;_.value=Array.isArray(e)?e:[]}catch(l){console.error("Error fetching units:",l),_.value=[]}},ae=async()=>{try{const l=await Me.getAll(),e=l.data||l;D.value=Array.isArray(e)?e:[]}catch(l){console.error("Error fetching courses:",l),D.value=[]}},ne=()=>{I.value=!1,Q(),z.value=!0},ie=l=>{I.value=!0,o.id=l.id,o.title=l.title,o.content=l.content,o.mediaUrl=l.mediaUrl,o.order_number=l.order_number,o.lessonId=l.lessonId,o.isActive=l.isActive,l.mediaUrl?l.mediaUrl.includes("youtube.com")||l.mediaUrl.includes("youtu.be")?o.mediaType="youtube":o.mediaType="url":o.mediaType="";const e=g.value.find(s=>s.id===l.lessonId);if(e){C.value=e.id;const s=_.value.find(i=>i.id===e.moduleId);s&&(v.value=s.id,x.value=s.courseId)}z.value=!0},q=()=>{z.value=!1,Q()},Q=()=>{o.id=null,o.title="",o.content="",o.mediaUrl="",o.mediaType="url",o.mediaFile=null,o.order_number=1,o.lessonId="",o.isActive=!0,O.value&&(O.value.value=""),B.value=!1},re=async()=>{if(!o.title||!o.lessonId){c.value="Please fill in all required fields";return}if(o.mediaType==="upload"&&!o.mediaFile){c.value="Please select a file to upload";return}if((o.mediaType==="url"||o.mediaType==="youtube")&&!o.mediaUrl){c.value="Please enter a valid URL";return}y.value=!0;try{let l=o.mediaUrl;if(o.mediaType==="upload"&&o.mediaFile)try{if(l=await be(o.mediaFile),!l)throw new Error("Upload completed but no URL returned")}catch(s){c.value=s.message;return}const e={title:o.title,content:o.content,mediaUrl:l,order_number:o.order_number,lessonId:o.lessonId,isActive:o.isActive};if(I.value){const s=await $.update(o.id,e),i=b.value.findIndex(m=>m.id===o.id);i!==-1&&(b.value[i]={...b.value[i],...s.data||s||e,id:o.id})}else{const s=await $.create(e),i=s.data||s;i&&i.id?b.value.push(i):b.value.push({...e,id:Date.now(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})}q(),c.value=""}catch(l){c.value=`Failed to save content: ${l.message||"Unknown error"}`,console.error("Error saving content:",l)}finally{y.value=!1}},de=async l=>{if(confirm("Are you sure you want to delete this content?")){y.value=!0;try{await $.delete(l),b.value=b.value.filter(e=>e.id!==l),c.value=""}catch(e){c.value=`Failed to delete content: ${e.message||"Unknown error"}`,console.error("Error deleting content:",e)}finally{y.value=!1}}},ue=async l=>{const e=l.isActive;try{l.isActive=!l.isActive;const s={...l,isActive:l.isActive};await $.update(l.id,s),c.value=""}catch(s){l.isActive=e,c.value=`Failed to update content status: ${s.message||"Unknown error"}`,console.error("Error updating content status:",s)}},ce=l=>{const e=g.value.find(s=>s.id===l||s.id===String(l));return e?e.title:"Unknown Lesson"},me=l=>{const e=g.value.find(s=>s.id===l||s.id===String(l));if(e){const s=_.value.find(i=>i.id===e.moduleId||i.id===String(e.moduleId));return s?s.title:"Unknown Unit"}return"Unknown Unit"},ve=l=>{const e=g.value.find(s=>s.id===l||s.id===String(l));if(e){const s=_.value.find(i=>i.id===e.moduleId||i.id===String(e.moduleId));if(s){const i=D.value.find(m=>m.id===s.courseId||m.id===String(s.courseId));return i&&(i.name||i.title)||"Unknown Course"}}return"Unknown Course"},pe=l=>{l>=1&&l<=P.value&&(u.value=l)},G=()=>{u.value>1&&u.value--},H=()=>{u.value<P.value&&u.value++},fe=l=>{F.value=l,u.value=1},ye=()=>{u.value=1},Z=l=>{const e=l.target.files[0];if(e){if(!["video/mp4","video/avi","video/mov","video/wmv","video/webm","audio/mp3","audio/wav","audio/m4a","audio/ogg","image/jpeg","image/png","image/gif","image/webp","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation"].includes(e.type)){c.value="Invalid file type. Please select a video, audio, image, PDF, or Office document.",l.target.value="";return}if(e.size>50*1024*1024){c.value="File size must be less than 50MB",l.target.value="";return}o.mediaFile=e,c.value=""}},be=async l=>{if(!l)return null;U.value=!0,M.value=0;try{const e=await De.uploadFile(l,"lesson-content",{metadata:{module:"lesson-contents",maxSize:52428800},onUploadProgress:s=>{s.lengthComputable&&(M.value=Math.round(s.loaded*100/s.total))}});return e.url||e.path||e.fileUrl||e.data?.url}catch(e){throw console.error("Upload error:",e),new Error(`File upload failed: ${e.message}`)}finally{U.value=!1,M.value=0}},ge=l=>{l.preventDefault(),A.value=!0},xe=l=>{l.preventDefault(),A.value=!1},we=l=>{l.preventDefault(),A.value=!1;const e=l.dataTransfer.files;if(e.length>0){const i={target:{files:[e[0]],value:""}};Z(i)}},he=()=>{const l=o.mediaUrl,e=/^(https?:\/\/)?(www\.)?(youtube\.com\/watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]{11})/;B.value=e.test(l)};return Ue(async()=>{await Promise.all([se(),le(),oe(),ae()])}),Y([x,v,C,T],()=>{ye()}),Y(x,()=>{v.value="",C.value=""}),Y(v,()=>{C.value=""}),(l,e)=>(n(),a("div",Se,[t("div",{class:"mb-6"},[t("div",{class:"flex justify-between items-center"},[e[16]||(e[16]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"Lesson Contents Management"),t("p",{class:"text-gray-600"},"Manage video and text content for lessons")],-1)),t("button",{onClick:ne,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors"},e[15]||(e[15]=[t("i",{class:"fas fa-plus mr-2"},null,-1),L(" Add Content ")]))])]),c.value?(n(),a("div",Ee,r(c.value),1)):w("",!0),t("div",Ve,[t("div",Ne,[t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Search Contents",-1)),p(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>T.value=s),placeholder:"Search by title or content...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[E,T.value]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Filter by Course",-1)),p(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>x.value=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[e[18]||(e[18]=t("option",{value:""},"All Courses",-1)),(n(!0),a(f,null,k(D.value,s=>(n(),a("option",{key:s.id,value:s.id},r(s.name||s.title||"Unnamed Course"),9,$e))),128))],512),[[V,x.value]])]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Filter by Unit",-1)),p(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>v.value=s),disabled:!x.value,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100"},[e[20]||(e[20]=t("option",{value:""},"All Units",-1)),(n(!0),a(f,null,k(K.value,s=>(n(),a("option",{key:s.id,value:s.id},r(s.title),9,je))),128))],8,ze),[[V,v.value]])]),t("div",null,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Filter by Lesson",-1)),p(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>C.value=s),disabled:!v.value,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100"},[e[22]||(e[22]=t("option",{value:""},"All Lessons",-1)),(n(!0),a(f,null,k(W.value,s=>(n(),a("option",{key:s.id,value:s.id},r(s.title),9,Oe))),128))],8,Be),[[V,C.value]])]),t("div",null,[e[24]||(e[24]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Items per page",-1)),t("select",{value:F.value,onChange:e[4]||(e[4]=s=>fe(Number(s.target.value))),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[(n(),a(f,null,k(J,s=>t("option",{key:s,value:s},r(s),9,qe)),64))],40,Re)])])]),t("div",Ye,[t("div",Qe,[t("table",Ge,[e[30]||(e[30]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Content "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Lesson & Course "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Media "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Order "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),t("tbody",He,[y.value?(n(),a("tr",Ze,e[25]||(e[25]=[t("td",{colspan:"6",class:"px-6 py-4 text-center text-gray-500"},[t("i",{class:"fas fa-spinner fa-spin mr-2"}),L(" Loading contents... ")],-1)]))):R.value.length===0?(n(),a("tr",Je,e[26]||(e[26]=[t("td",{colspan:"6",class:"px-6 py-4 text-center text-gray-500"}," No contents found ",-1)]))):(n(!0),a(f,{key:2},k(ee.value,s=>(n(),a("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",Ke,[t("div",null,[t("div",We,r(s.title),1),t("div",Xe,r(s.content),1)])]),t("td",et,[t("div",tt,r(ve(s.lessonId)),1),t("div",st,r(me(s.lessonId))+" > "+r(ce(s.lessonId)),1)]),t("td",lt,[s.mediaUrl?(n(),a("div",ot,[t("a",{href:s.mediaUrl,target:"_blank",class:"text-blue-600 hover:text-blue-900"},e[27]||(e[27]=[t("i",{class:"fas fa-play-circle mr-1"},null,-1),L(" Media ")]),8,at)])):(n(),a("div",nt,"No media"))]),t("td",it,r(s.order_number),1),t("td",rt,[t("button",{onClick:i=>ue(s),class:N([s.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800","px-2 py-1 text-xs font-medium rounded-full"])},r(s.isActive?"Active":"Inactive"),11,dt)]),t("td",ut,[t("button",{onClick:i=>ie(s),class:"text-indigo-600 hover:text-indigo-900 mr-3"},e[28]||(e[28]=[t("i",{class:"fas fa-edit"},null,-1)]),8,ct),t("button",{onClick:i=>de(s.id),class:"text-red-600 hover:text-red-900"},e[29]||(e[29]=[t("i",{class:"fas fa-trash"},null,-1)]),8,mt)])]))),128))])])]),S.value>0?(n(),a("div",vt,[t("div",pt,[t("div",ft,[t("button",{onClick:G,disabled:u.value===1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,yt),t("button",{onClick:H,disabled:u.value===P.value,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,bt)]),t("div",gt,[t("div",null,[t("p",xt,r(te.value),1)]),t("div",null,[t("nav",wt,[t("button",{onClick:G,disabled:u.value===1,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},e[31]||(e[31]=[t("span",{class:"sr-only"},"Previous",-1),t("i",{class:"fas fa-chevron-left h-5 w-5"},null,-1)]),8,ht),(n(!0),a(f,null,k(Math.min(P.value,7),s=>(n(),a(f,{key:s},[s===1||s===P.value||s>=u.value-2&&s<=u.value+2?(n(),a("button",{key:0,onClick:i=>pe(s),class:N([s===u.value?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50","relative inline-flex items-center px-4 py-2 border text-sm font-medium"])},r(s),11,kt)):s===u.value-3||s===u.value+3?(n(),a("span",Ut," ... ")):w("",!0)],64))),128)),t("button",{onClick:H,disabled:u.value===P.value,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},e[32]||(e[32]=[t("span",{class:"sr-only"},"Next",-1),t("i",{class:"fas fa-chevron-right h-5 w-5"},null,-1)]),8,_t)])])])])])):w("",!0)]),z.value?(n(),a("div",Ct,[t("div",It,[t("div",At,[t("div",Ft,[t("h3",Pt,r(I.value?"Edit Content":"Create New Content"),1),t("button",{onClick:q,class:"text-gray-400 hover:text-gray-600"},e[33]||(e[33]=[t("i",{class:"fas fa-times"},null,-1)]))]),t("form",{onSubmit:_e(re,["prevent"]),class:"space-y-4"},[t("div",null,[e[34]||(e[34]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[L(" Title "),t("span",{class:"text-red-500"},"*")],-1)),p(t("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=s=>o.title=s),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter content title"},null,512),[[E,o.title]])]),t("div",null,[e[36]||(e[36]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[L(" Lesson "),t("span",{class:"text-red-500"},"*")],-1)),p(t("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>o.lessonId=s),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[e[35]||(e[35]=t("option",{value:""},"Select Lesson",-1)),(n(!0),a(f,null,k(D.value,s=>(n(),a("optgroup",{key:s.id,label:s.name||s.title||"Unnamed Course"},[(n(!0),a(f,null,k(_.value.filter(i=>i.courseId===s.id),i=>(n(),a(f,{key:i.id},[(n(!0),a(f,null,k(g.value.filter(m=>m.moduleId===i.id),m=>(n(),a("option",{key:m.id,value:m.id},r(i.title)+" > "+r(m.title),9,Tt))),128))],64))),128))],8,Lt))),128))],512),[[V,o.lessonId]])]),t("div",null,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Content ",-1)),Ce(Ie(Ae),{content:o.content,"onUpdate:content":e[7]||(e[7]=s=>o.content=s),theme:"snow",toolbar:"full",contentType:"html",class:"bg-white",style:{minHeight:"200px"},placeholder:"Enter detailed content..."},null,8,["content"])]),t("div",null,[e[39]||(e[39]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Media Type ",-1)),p(t("select",{"onUpdate:modelValue":e[8]||(e[8]=s=>o.mediaType=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},e[38]||(e[38]=[t("option",{value:""},"No Media",-1),t("option",{value:"url"},"Direct URL",-1),t("option",{value:"upload"},"File Upload",-1),t("option",{value:"youtube"},"YouTube Embed",-1)]),512),[[V,o.mediaType]])]),o.mediaType==="url"?(n(),a("div",Mt,[e[40]||(e[40]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Media URL ",-1)),p(t("input",{type:"url","onUpdate:modelValue":e[9]||(e[9]=s=>o.mediaUrl=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/media/video.mp4"},null,512),[[E,o.mediaUrl]])])):w("",!0),o.mediaType==="upload"?(n(),a("div",Dt,[e[46]||(e[46]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Upload File ",-1)),t("div",{class:N(["border-2 border-dashed rounded-md p-4 text-center transition-colors",A.value?"border-blue-400 bg-blue-50":"border-gray-300"]),onDragover:ge,onDragleave:xe,onDrop:we},[t("input",{type:"file",ref_key:"fileInput",ref:O,onChange:Z,accept:"video/*,audio/*,image/*,.pdf,.doc,.docx,.ppt,.pptx",class:"hidden"},null,544),!o.mediaFile&&!U.value?(n(),a("div",St,[t("i",{class:N(["fas fa-cloud-upload-alt text-4xl mb-2",A.value?"text-blue-400":"text-gray-300"])},null,2),t("button",{type:"button",onClick:e[10]||(e[10]=s=>l.$refs.fileInput.click()),class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50"},e[41]||(e[41]=[t("i",{class:"fas fa-upload mr-2"},null,-1),L(" Choose File ")])),t("p",{class:N(["mt-2 text-sm",A.value?"text-blue-600":"text-gray-500"])}," Or drag and drop a file here ",2),e[42]||(e[42]=t("p",{class:"text-xs text-gray-400 mt-1"}," Supports: Video, Audio, Image, PDF, Office documents (Max: 50MB) ",-1))])):o.mediaFile&&!U.value?(n(),a("div",Et,[t("div",Vt,[t("div",Nt,[e[43]||(e[43]=t("i",{class:"fas fa-file text-green-600 mr-2"},null,-1)),t("div",$t,[t("p",zt,r(o.mediaFile.name),1),t("p",jt,r((o.mediaFile.size/1024/1024).toFixed(2))+" MB",1)])]),t("button",{type:"button",onClick:e[11]||(e[11]=s=>{o.mediaFile=null,l.$refs.fileInput.value=""}),class:"text-red-500 hover:text-red-700"},e[44]||(e[44]=[t("i",{class:"fas fa-times"},null,-1)]))])])):U.value?(n(),a("div",Bt,[t("div",Ot,[e[45]||(e[45]=t("i",{class:"fas fa-spinner fa-spin text-blue-500 mr-2"},null,-1)),t("span",Rt,"Uploading... "+r(M.value)+"%",1)]),t("div",qt,[t("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:Fe({width:M.value+"%"})},null,4)]),t("p",Yt,r(o.mediaFile?.name),1)])):w("",!0)],34)])):w("",!0),o.mediaType==="youtube"?(n(),a("div",Qt,[e[48]||(e[48]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," YouTube URL ",-1)),p(t("input",{type:"url","onUpdate:modelValue":e[12]||(e[12]=s=>o.mediaUrl=s),onInput:he,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://www.youtube.com/watch?v=..."},null,544),[[E,o.mediaUrl]]),B.value?(n(),a("div",Gt,e[47]||(e[47]=[t("p",{class:"text-sm text-gray-600"},"Preview:",-1),t("div",{class:"mt-1 aspect-video bg-gray-200 rounded flex items-center justify-center"},[t("span",{class:"text-gray-500"},"YouTube Video Preview")],-1)]))):w("",!0)])):w("",!0),t("div",null,[e[49]||(e[49]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Order Number",-1)),p(t("input",{type:"number","onUpdate:modelValue":e[13]||(e[13]=s=>o.order_number=s),min:"1",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[E,o.order_number]])]),t("div",Ht,[p(t("input",{type:"checkbox","onUpdate:modelValue":e[14]||(e[14]=s=>o.isActive=s),id:"isActive",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[Pe,o.isActive]]),e[50]||(e[50]=t("label",{for:"isActive",class:"ml-2 block text-sm text-gray-900"}," Active ",-1))]),t("div",Zt,[t("button",{type:"button",onClick:q,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"}," Cancel "),t("button",{type:"submit",disabled:y.value||U.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"},[y.value||U.value?(n(),a("i",Kt)):w("",!0),U.value?(n(),a("span",Wt,"Uploading...")):y.value?(n(),a("span",Xt,r(I.value?"Updating...":"Creating..."),1)):(n(),a("span",es,r(I.value?"Update":"Create"),1))],8,Jt)])],32)])])])):w("",!0)]))}};export{ls as default};
