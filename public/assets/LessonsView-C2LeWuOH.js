import{g as c,p as Ue,h as U,i as Me,B as G,c as r,b as t,k as A,e as k,t as i,q as S,v as J,x as B,F as L,l as M,s as te,y as De,j as Pe,C as $,z as Ee,A as Fe,o as n,n as K}from"./index-klw2IyYl.js";const $e={class:"p-6"},je={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4"},Ne={class:"bg-white rounded-lg shadow p-4 mb-6"},qe={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Te={value:""},Oe=["value"],Be=["disabled"],ze=["value"],Re=["value"],He=["value"],Qe={class:"bg-white rounded-lg shadow overflow-hidden"},We={class:"overflow-x-auto"},Ye={class:"min-w-full divide-y divide-gray-200"},Ge={class:"bg-white divide-y divide-gray-200"},Je={key:0},Ke={key:1},Xe={class:"px-6 py-4 whitespace-nowrap"},Ze={class:"text-sm font-medium text-gray-900"},et={class:"text-sm text-gray-500"},tt={class:"px-6 py-4 whitespace-nowrap"},st={class:"text-sm text-gray-900"},lt={class:"text-sm text-gray-500"},ot={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},rt={class:"px-6 py-4 whitespace-nowrap"},nt={class:"px-6 py-4 whitespace-nowrap"},at=["onClick"],it={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},dt=["onClick"],ut=["onClick"],ct={key:0,class:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6"},vt={class:"flex items-center justify-between"},pt={class:"flex-1 flex justify-between sm:hidden"},mt=["disabled"],gt=["disabled"],ft={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},bt={class:"text-sm text-gray-700"},yt={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},xt=["disabled"],ht=["onClick"],wt={key:1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700"},Ct=["disabled"],kt={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},_t={class:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white"},It={class:"mt-3"},At={class:"flex justify-between items-center mb-4"},St={class:"text-lg font-medium text-gray-900"},Lt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Vt={value:""},Ut=["value"],Mt={key:0,class:"text-red-500 text-xs mt-1"},Dt=["disabled"],Pt=["value"],Et={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ft={class:"flex items-center"},$t={class:"flex justify-end space-x-3 pt-4"},jt=["disabled"],Nt={key:0,class:"fas fa-spinner fa-spin mr-2"},qt={key:2,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Tt={class:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white"},Ot={class:"mt-3"},Bt={class:"space-y-4"},zt={key:0,class:"text-sm text-green-600 mb-2"},Rt={class:"bg-blue-50 p-4 rounded-lg"},Ht={class:"text-sm text-blue-800 max-h-32 overflow-y-auto"},Qt={key:0,class:"text-gray-600"},Wt={key:1,class:"space-y-1"},Yt={class:"bg-blue-100 px-1 rounded"},Gt={class:"flex justify-end space-x-3 pt-4"},Jt=["disabled"],Kt={key:0,class:"fas fa-spinner fa-spin mr-2"},es={__name:"LessonsView",setup(Xt){const v=c(!1),y=c(""),j=c(""),z=c(!1),N=c(!1),H=c(!1),h=c(null),P=c(null),p=c([]),w=c([]),b=c([]),m=c(""),q=c(""),d=c(1),E=c(10),se=[5,10,20,50],o=Ue({id:null,title:"",order:1,isActive:!0,type:"lesson",moduleId:""}),Q=U(()=>{let l=p.value;if(m.value){const e=b.value.filter(s=>s.courseId===m.value).map(s=>s.id);l=l.filter(s=>e.includes(s.moduleId))}if(q.value&&(l=l.filter(e=>e.moduleId===q.value)),j.value){const e=j.value.toLowerCase();l=l.filter(s=>s.title.toLowerCase().includes(e))}return l}),le=U(()=>m.value?b.value.filter(l=>l.courseId===m.value):[]),T=U(()=>Q.value.length),F=U(()=>Math.ceil(T.value/E.value)),R=U(()=>(d.value-1)*E.value),oe=U(()=>Math.min(R.value+E.value,T.value)),re=U(()=>{const l=R.value,e=R.value+E.value;return Q.value.slice(l,e)}),ne=U(()=>T.value===0?"No items to show":`Showing ${R.value+1} to ${oe.value} of ${T.value} lessons`),ae=async()=>{v.value=!0;try{const l=await $.getAll(),e=l.data||l;p.value=Array.isArray(e)?e:[]}catch(l){y.value=`Failed to fetch lessons: ${l.message||"Unknown error"}`,console.error("Error fetching lessons:",l),p.value=[]}finally{v.value=!1}},ie=async()=>{try{const l=await Ee.getAll();console.log("Courses API response:",l);const e=l.data||l;console.log("Courses data:",e),w.value=Array.isArray(e)?e:[],console.log("Final courses value:",w.value)}catch(l){console.error("Error fetching courses:",l),w.value=[]}},de=async()=>{try{const l=await Fe.getAll(),e=l.data||l;b.value=Array.isArray(e)?e:[]}catch(l){console.error("Error fetching units:",l),b.value=[]}},ue=()=>{N.value=!1,X(),z.value=!0},ce=l=>{N.value=!0,o.id=l.id,o.title=l.title,o.order=l.order,o.isActive=l.isActive,o.type=l.type,o.moduleId=l.moduleId;const e=b.value.find(s=>s.id===l.moduleId);e&&(m.value=e.courseId),z.value=!0},W=()=>{z.value=!1,m.value="",X()},X=()=>{o.id=null,o.title="",o.order=1,o.isActive=!0,o.type="lesson",o.moduleId=""},ve=async()=>{if(!o.title||!o.moduleId){y.value="Please fill in all required fields";return}v.value=!0;try{const l={title:o.title,order:o.order,isActive:o.isActive,type:o.type,moduleId:o.moduleId};if(N.value){const e=await $.update(o.id,l),s=p.value.findIndex(a=>a.id===o.id);s!==-1&&(p.value[s]={...p.value[s],...e.data||e||l,id:o.id})}else{const e=await $.create(l),s=e.data||e;s&&s.id?p.value.push(s):p.value.push({...l,id:Date.now(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})}W(),y.value=""}catch(l){y.value=`Failed to save lesson: ${l.message||"Unknown error"}`,console.error("Error saving lesson:",l)}finally{v.value=!1}},pe=async l=>{if(confirm("Are you sure you want to delete this lesson?")){v.value=!0;try{await $.delete(l),p.value=p.value.filter(e=>e.id!==l),y.value=""}catch(e){y.value=`Failed to delete lesson: ${e.message||"Unknown error"}`,console.error("Error deleting lesson:",e)}finally{v.value=!1}}},me=async l=>{const e=l.isActive;try{l.isActive=!l.isActive;const s={...l,isActive:l.isActive};await $.update(l.id,s),y.value=""}catch(s){l.isActive=e,y.value=`Failed to update lesson status: ${s.message||"Unknown error"}`,console.error("Error updating lesson status:",s)}},ge=l=>({lesson:"bg-blue-100 text-blue-800",practice:"bg-green-100 text-green-800",test:"bg-red-100 text-red-800"})[l]||"bg-gray-100 text-gray-800",fe=l=>{const e=w.value.find(s=>s.id===l||s.id===String(l));return e&&(e.name||e.title)||"Unknown Course"},be=l=>{const e=b.value.find(s=>s.id===l||s.id===String(l));return e?e.name:"Unknown Module"},ye=l=>{l>=1&&l<=F.value&&(d.value=l)},Z=()=>{d.value>1&&d.value--},ee=()=>{d.value<F.value&&d.value++},xe=l=>{E.value=l,d.value=1},he=()=>{if(p.value.length===0){alert("No lessons to export");return}const e=[["title","order","type","isActive","moduleId"].join(","),...p.value.map(g=>[g.title||"",g.order||1,g.type||"lesson",g.isActive?"true":"false",g.moduleId||""].map(V=>{const D=String(V);return D.includes(",")||D.includes('"')?`"${D.replace(/"/g,'""')}"`:D}).join(","))].join(`
`),s=new Blob([e],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),C=URL.createObjectURL(s);a.setAttribute("href",C),a.setAttribute("download",`lessons_${new Date().toISOString().split("T")[0]}.csv`),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)},we=()=>{H.value=!0,h.value=null,P.value&&(P.value.value="")},Y=()=>{H.value=!1,h.value=null,P.value&&(P.value.value="")},Ce=l=>{const e=l.target.files[0];if(e){if(e.type!=="text/csv"&&!e.name.toLowerCase().endsWith(".csv")){alert("Please select a CSV file");return}h.value=e}},ke=l=>{l.preventDefault();const e=l.dataTransfer.files;if(e.length>0){const s=e[0];if(s.type!=="text/csv"&&!s.name.toLowerCase().endsWith(".csv")){alert("Please drop a CSV file");return}h.value=s}},_e=l=>{l.preventDefault()},Ie=l=>{const e=l.split(`
`).filter(f=>f.trim());if(e.length<2)throw new Error("CSV file must have at least a header row and one data row");const s=f=>{const O=[];let u="",x=!1;for(let _=0;_<f.length;_++){const I=f[_],Ve=f[_+1];I==='"'?x&&Ve==='"'?(u+='"',_++):x=!x:I===","&&!x?(O.push(u.trim()),u=""):u+=I}return O.push(u.trim()),O},a=s(e[0]).map(f=>f.toLowerCase()),C=["title","moduleId"],g=["order","type","isActive"],V=C.filter(f=>!a.includes(f));if(V.length>0)throw new Error(`Missing required columns: ${V.join(", ")}`);const D=[];for(let f=1;f<e.length;f++){const O=s(e[f]),u={};a.forEach((x,_)=>{if(C.includes(x)||g.includes(x)){let I=O[_]||"";x==="isactive"?I=I.toLowerCase()==="true":x==="order"&&(I=parseInt(I)||1),u[x]=I}}),u.title&&u.title.trim()&&u.moduleid&&b.value.some(_=>_.id===u.moduleid)&&D.push({title:u.title,order:u.order||1,type:u.type||"lesson",isActive:u.isactive!==void 0?u.isactive:!0,moduleId:u.moduleid})}return D},Ae=async()=>{if(!h.value){alert("Please select a CSV file first");return}v.value=!0;try{const l=await h.value.text(),e=Ie(l);if(e.length===0){alert("No valid lessons found in CSV file");return}let s=0,a=0;for(const C of e)try{const g=await $.create(C),V=g.data||g;V&&V.id?p.value.push(V):p.value.push({...C,id:Date.now()+Math.random(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),s++}catch(g){console.error("Error importing lesson:",C.title,g),a++}Y(),s>0?alert(`Successfully imported ${s} lessons${a>0?`. ${a} lessons failed to import.`:""}`):alert("No lessons were imported"),y.value=""}catch(l){console.error("Error importing CSV:",l),alert(`Error importing CSV: ${l.message}`)}finally{v.value=!1}},Se=()=>{const e=[["title","order","type","isActive","moduleId"],["Introduction to Basics","1","lesson","true","module_id_here"],["Practice Exercise 1","2","practice","true","module_id_here"],["Unit Test 1","3","test","true","module_id_here"]].map(g=>g.join(",")).join(`
`),s=new Blob([e],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),C=URL.createObjectURL(s);a.setAttribute("href",C),a.setAttribute("download","lessons_sample_template.csv"),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)},Le=()=>{d.value=1};return Me(async()=>{await Promise.all([ae(),ie(),de()])}),G(w,l=>{console.log("Courses updated:",l)},{deep:!0}),G(b,l=>{console.log("Units updated:",l)},{deep:!0}),G([m,q,j],()=>{Le()}),(l,e)=>(n(),r("div",$e,[t("div",{class:"mb-6"},[t("div",{class:"flex justify-between items-center"},[e[15]||(e[15]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"Lessons Management"),t("p",{class:"text-gray-600"},"Manage your course lessons")],-1)),t("div",{class:"flex space-x-2"},[t("button",{onClick:he,class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors"},e[12]||(e[12]=[t("i",{class:"fas fa-download mr-2"},null,-1),k(" Export CSV ")])),t("button",{onClick:we,class:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors"},e[13]||(e[13]=[t("i",{class:"fas fa-upload mr-2"},null,-1),k(" Import CSV ")])),t("button",{onClick:ue,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors"},e[14]||(e[14]=[t("i",{class:"fas fa-plus mr-2"},null,-1),k(" Add Lesson ")]))])])]),y.value?(n(),r("div",je,i(y.value),1)):A("",!0),t("div",Ne,[t("div",qe,[t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Search Lessons",-1)),S(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>j.value=s),placeholder:"Search by title...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[J,j.value]])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Filter by Course",-1)),S(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>m.value=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[t("option",Te,"All Courses ("+i(w.value.length)+" total)",1),(n(!0),r(L,null,M(w.value,s=>(n(),r("option",{key:s.id,value:s.id},i(s.name||s.title||"Unnamed Course"),9,Oe))),128))],512),[[B,m.value]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Filter by Module",-1)),S(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>q.value=s),disabled:!m.value,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100"},[e[18]||(e[18]=t("option",{value:""},"All Modules",-1)),(n(!0),r(L,null,M(le.value,s=>(n(),r("option",{key:s.id,value:s.id},i(s.title),9,ze))),128))],8,Be),[[B,q.value]])]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Items per page",-1)),t("select",{value:E.value,onChange:e[3]||(e[3]=s=>xe(Number(s.target.value))),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[(n(),r(L,null,M(se,s=>t("option",{key:s,value:s},i(s),9,He)),64))],40,Re)])])]),t("div",Qe,[t("div",We,[t("table",Ye,[e[25]||(e[25]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Lesson "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Course & Module "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Order "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Type "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),t("tbody",Ge,[v.value?(n(),r("tr",Je,e[21]||(e[21]=[t("td",{colspan:"6",class:"px-6 py-4 text-center text-gray-500"},[t("i",{class:"fas fa-spinner fa-spin mr-2"}),k(" Loading lessons... ")],-1)]))):Q.value.length===0?(n(),r("tr",Ke,e[22]||(e[22]=[t("td",{colspan:"6",class:"px-6 py-4 text-center text-gray-500"}," No lessons found ",-1)]))):(n(!0),r(L,{key:2},M(re.value,s=>(n(),r("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",Xe,[t("div",null,[t("div",Ze,i(s.title),1),t("div",et,"ID: "+i(s.id),1)])]),t("td",tt,[t("div",st,i(fe(b.value.find(a=>a.id===s.moduleId)?.courseId)),1),t("div",lt,i(be(s.moduleId)),1)]),t("td",ot,i(s.order),1),t("td",rt,[t("span",{class:K([ge(s.type),"px-2 py-1 text-xs font-medium rounded-full"])},i(s.type),3)]),t("td",nt,[t("button",{onClick:a=>me(s),class:K([s.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800","px-2 py-1 text-xs font-medium rounded-full"])},i(s.isActive?"Active":"Inactive"),11,at)]),t("td",it,[t("button",{onClick:a=>ce(s),class:"text-indigo-600 hover:text-indigo-900 mr-3"},e[23]||(e[23]=[t("i",{class:"fas fa-edit"},null,-1)]),8,dt),t("button",{onClick:a=>pe(s.id),class:"text-red-600 hover:text-red-900"},e[24]||(e[24]=[t("i",{class:"fas fa-trash"},null,-1)]),8,ut)])]))),128))])])]),T.value>0?(n(),r("div",ct,[t("div",vt,[t("div",pt,[t("button",{onClick:Z,disabled:d.value===1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,mt),t("button",{onClick:ee,disabled:d.value===F.value,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,gt)]),t("div",ft,[t("div",null,[t("p",bt,i(ne.value),1)]),t("div",null,[t("nav",yt,[t("button",{onClick:Z,disabled:d.value===1,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},e[26]||(e[26]=[t("span",{class:"sr-only"},"Previous",-1),t("i",{class:"fas fa-chevron-left h-5 w-5"},null,-1)]),8,xt),(n(!0),r(L,null,M(Math.min(F.value,7),s=>(n(),r(L,{key:s},[s===1||s===F.value||s>=d.value-2&&s<=d.value+2?(n(),r("button",{key:0,onClick:a=>ye(s),class:K([s===d.value?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50","relative inline-flex items-center px-4 py-2 border text-sm font-medium"])},i(s),11,ht)):s===d.value-3||s===d.value+3?(n(),r("span",wt," ... ")):A("",!0)],64))),128)),t("button",{onClick:ee,disabled:d.value===F.value,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},e[27]||(e[27]=[t("span",{class:"sr-only"},"Next",-1),t("i",{class:"fas fa-chevron-right h-5 w-5"},null,-1)]),8,Ct)])])])])])):A("",!0)]),z.value?(n(),r("div",kt,[t("div",_t,[t("div",It,[t("div",At,[t("h3",St,i(N.value?"Edit Lesson":"Create New Lesson"),1),t("button",{onClick:W,class:"text-gray-400 hover:text-gray-600"},e[28]||(e[28]=[t("i",{class:"fas fa-times"},null,-1)]))]),t("form",{onSubmit:te(ve,["prevent"]),class:"space-y-4"},[t("div",null,[e[29]||(e[29]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[k(" Title "),t("span",{class:"text-red-500"},"*")],-1)),S(t("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=s=>o.title=s),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter lesson title"},null,512),[[J,o.title]])]),t("div",Lt,[t("div",null,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[k(" Course "),t("span",{class:"text-red-500"},"*")],-1)),S(t("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>m.value=s),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[t("option",Vt,"Select Course ("+i(w.value.length)+" available)",1),(n(!0),r(L,null,M(w.value,s=>(n(),r("option",{key:s.id,value:s.id},i(s.title||"Unnamed Course"),9,Ut))),128))],512),[[B,m.value]]),w.value.length===0?(n(),r("p",Mt,"No courses available")):A("",!0)]),t("div",null,[e[32]||(e[32]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[k(" Module "),t("span",{class:"text-red-500"},"*")],-1)),S(t("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>o.moduleId=s),disabled:!m.value,required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100"},[e[31]||(e[31]=t("option",{value:""},"Select Module",-1)),(n(!0),r(L,null,M(b.value.filter(s=>s.courseId===m.value),s=>(n(),r("option",{key:s.id,value:s.id},i(s.title),9,Pt))),128))],8,Dt),[[B,o.moduleId]])])]),t("div",Et,[t("div",null,[e[33]||(e[33]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Order",-1)),S(t("input",{type:"number","onUpdate:modelValue":e[7]||(e[7]=s=>o.order=s),min:"1",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[J,o.order]])]),t("div",null,[e[35]||(e[35]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Type",-1)),S(t("select",{"onUpdate:modelValue":e[8]||(e[8]=s=>o.type=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},e[34]||(e[34]=[t("option",{value:"lesson"},"Lesson",-1),t("option",{value:"practice"},"Practice",-1),t("option",{value:"test"},"Test",-1)]),512),[[B,o.type]])])]),t("div",Ft,[S(t("input",{type:"checkbox","onUpdate:modelValue":e[9]||(e[9]=s=>o.isActive=s),id:"isActive",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[De,o.isActive]]),e[36]||(e[36]=t("label",{for:"isActive",class:"ml-2 block text-sm text-gray-900"}," Active ",-1))]),t("div",$t,[t("button",{type:"button",onClick:W,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"}," Cancel "),t("button",{type:"submit",disabled:v.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50"},[v.value?(n(),r("i",Nt)):A("",!0),k(" "+i(N.value?"Update":"Create"),1)],8,jt)])],32)])])])):A("",!0),H.value?(n(),r("div",qt,[t("div",Tt,[t("div",Ot,[t("div",{class:"flex justify-between items-center mb-4"},[e[38]||(e[38]=t("h3",{class:"text-lg font-medium text-gray-900"},"Import Lessons from CSV",-1)),t("button",{onClick:Y,class:"text-gray-400 hover:text-gray-600"},e[37]||(e[37]=[t("i",{class:"fas fa-times"},null,-1)]))]),t("div",Bt,[t("div",null,[e[42]||(e[42]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"CSV File",-1)),t("div",{class:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors",onDrop:ke,onDragover:_e,onDragenter:e[11]||(e[11]=te(()=>{},["prevent"]))},[e[40]||(e[40]=t("i",{class:"fas fa-cloud-upload-alt text-gray-400 text-3xl mb-4"},null,-1)),e[41]||(e[41]=t("p",{class:"text-gray-600 mb-2"},"Drag and drop your CSV file here, or click to select",-1)),h.value?(n(),r("p",zt,[e[39]||(e[39]=t("i",{class:"fas fa-file-csv mr-1"},null,-1)),k(i(h.value.name),1)])):A("",!0),t("input",{type:"file",accept:".csv",class:"hidden",ref_key:"csvFileInput",ref:P,onChange:Ce},null,544),t("button",{type:"button",onClick:e[10]||(e[10]=s=>P.value?.click()),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"},i(h.value?"Change File":"Select CSV File"),1)],32)]),t("div",{class:"bg-yellow-50 p-4 rounded-lg"},[e[44]||(e[44]=t("h4",{class:"font-medium text-yellow-900 mb-2"},"CSV Format Requirements",-1)),t("div",{class:"text-sm text-yellow-800"},[e[43]||(e[43]=Pe('<p>Your CSV file should have the following columns:</p><ul class="list-disc list-inside mt-2 space-y-1"><li><strong>title</strong> - Lesson title (required)</li><li><strong>moduleId</strong> - Module/Unit ID (required)</li><li><strong>order</strong> - Lesson order (optional, default: 1)</li><li><strong>type</strong> - Lesson type: lesson, practice, or test (optional, default: lesson)</li><li><strong>isActive</strong> - Active status: true or false (optional, default: true)</li></ul>',2)),t("p",{class:"mt-2"},[t("button",{type:"button",onClick:Se,class:"text-blue-600 hover:text-blue-800 underline"}," Download sample CSV template ")])])]),t("div",Rt,[e[45]||(e[45]=t("h4",{class:"font-medium text-blue-900 mb-2"},"Available Module IDs",-1)),t("div",Ht,[b.value.length===0?(n(),r("div",Qt,"No modules available")):(n(),r("div",Wt,[(n(!0),r(L,null,M(b.value,s=>(n(),r("div",{key:s.id,class:"flex justify-between"},[t("span",null,i(s.title),1),t("code",Yt,i(s.id),1)]))),128))]))])])]),t("div",Gt,[t("button",{type:"button",onClick:Y,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"}," Cancel "),t("button",{type:"button",onClick:Ae,disabled:!h.value||v.value,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed"},[v.value?(n(),r("i",Kt)):A("",!0),k(" "+i(v.value?"Importing...":"Import Lessons"),1)],8,Jt)])])])])):A("",!0)]))}};export{es as default};
