import{g as m,p as Y,h as v,i as Ee,c as i,b as t,k as p,e as y,t as d,q as u,v as g,x as k,F as f,l as b,s as Z,H as Ve,f as Le,Q as Qe,y as D,I as V,z as Me,A as $e,C as Te,o as r,n as Se}from"./index-klw2IyYl.js";const Fe={class:"p-6"},Pe={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4"},De={class:"bg-white rounded-lg shadow p-4 mb-6"},Oe={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},je=["value"],Ge=["disabled"],Ne=["value"],Re=["disabled"],Be=["value"],ze={class:"bg-white rounded-lg shadow overflow-hidden"},He={class:"overflow-x-auto"},We={class:"min-w-full divide-y divide-gray-200"},Je={class:"bg-white divide-y divide-gray-200"},Ke={key:0},Xe={key:1},Ye={class:"px-6 py-4 whitespace-nowrap"},Ze={class:"text-sm font-medium text-gray-900"},et={key:0,class:"text-sm text-gray-500"},tt={class:"px-6 py-4 whitespace-nowrap"},st={class:"space-y-1"},ot={class:"flex items-center"},lt={class:"text-sm text-gray-900"},nt={class:"flex items-center"},rt={class:"text-xs text-gray-600"},it={class:"px-6 py-4 whitespace-nowrap"},at={class:"text-sm text-gray-900"},ut={class:"px-6 py-4 whitespace-nowrap"},dt={class:"flex items-center space-x-2"},ct={class:"text-xs text-gray-500"},pt={key:0,class:"px-2 py-1 text-xs bg-purple-100 text-purple-800 rounded-full"},mt={key:1,class:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full"},gt={class:"px-6 py-4 whitespace-nowrap"},ft=["onClick"],bt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},yt=["onClick"],vt=["onClick"],xt={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},_t={class:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-2/3 shadow-lg rounded-md bg-white"},wt={class:"mt-3"},ht={class:"flex justify-between items-center mb-4"},kt={class:"text-lg font-medium text-gray-900"},At={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ct=["value"],qt={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ut={key:0},It={key:1,class:"space-y-4"},Et={class:"relative"},Vt={class:"relative inline-block"},Lt=["src"],Qt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Mt=["value"],$t=["disabled"],Tt=["value"],St=["disabled"],Ft=["value"],Pt={key:2,class:"space-y-4"},Dt={class:"flex justify-between items-center"},Ot={key:0,class:"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg"},jt={key:1,class:"space-y-3"},Gt={class:"flex justify-between items-start"},Nt={class:"flex-1"},Rt={class:"flex items-center space-x-2 mb-2"},Bt={class:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full"},zt={class:"text-xs text-gray-500"},Ht={class:"text-xs text-gray-500"},Wt={class:"text-sm text-gray-900 font-medium"},Jt={class:"flex space-x-2"},Kt=["onClick"],Xt=["onClick"],Yt={class:"flex items-center"},Zt={class:"flex justify-end space-x-3 pt-4"},es=["disabled"],ts={key:0,class:"fas fa-spinner fa-spin mr-2"},ss={key:2,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},os={class:"relative top-10 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-2/3 shadow-lg rounded-md bg-white"},ls={class:"mt-3"},ns={class:"flex justify-between items-center mb-4"},rs={class:"text-lg font-medium text-gray-900"},is={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},as=["value"],us={key:0,class:"space-y-3"},ds={class:"space-y-2"},cs=["onUpdate:modelValue","placeholder"],ps={class:"flex items-center"},ms=["onUpdate:modelValue"],gs=["onClick","disabled"],fs={key:1,class:"space-y-3"},bs={class:"space-y-4"},ys={class:"flex items-center justify-between mb-3"},vs={class:"text-sm font-medium text-gray-700"},xs=["onClick","disabled"],_s={class:"space-y-2"},ws=["onUpdate:modelValue","placeholder"],hs=["onClick","disabled"],ks=["onClick"],As={key:2,class:"space-y-3"},Cs={class:"space-y-2"},qs=["onUpdate:modelValue"],Us={class:"flex items-center space-x-2"},Is=["onUpdate:modelValue"],Es=["onClick","disabled"],Vs={key:3,class:"space-y-3"},Ls={class:"space-y-2"},Qs={class:"space-y-2"},Ms=["onUpdate:modelValue"],$s={class:"flex items-center"},Ts=["onUpdate:modelValue"],Ss={class:"flex justify-end space-x-3 pt-4"},Fs={type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},Os={__name:"ExercisesView",setup(Ps){const w=m(!1),x=m(""),L=m(""),Q=m(!1),I=m(!1),_=m([]),M=m([]),U=m([]),h=m([]),A=m(""),C=m(""),$=m(""),T=m(!1),E=m(!1),S=m(-1),l=Y({id:null,title:"",exercise_type:"grammar",audio_url:"",image_url:"",instructions:"",content:"",isActive:!0,courseId:"",unitId:"",lessonId:"",questions:[]}),n=Y({id:null,question_type:"multiple_choice",question_text:"",points:5,order_number:1,sample_answer:"",options:[{option_text:"",is_correct:!1},{option_text:"",is_correct:!1}],gap_filling:[{gap_number:1,correct_answer:[]}],matching:[{left_item:"",right_item:""}],typing:[{correct_answer:"",is_case_sensitive:!1}]}),O=[{value:"grammar",label:"Grammar",icon:"fa-book"},{value:"listening",label:"Listening",icon:"fa-headphones"},{value:"reading",label:"Reading",icon:"fa-book-open"},{value:"writing",label:"Writing",icon:"fa-pen"}],j=[{value:"multiple_choice",label:"Multiple Choice",icon:"fa-check-circle"},{value:"true_false",label:"True/False",icon:"fa-check-square"},{value:"fill_in_the_blank",label:"Fill in the Blank",icon:"fa-pen"},{value:"matching",label:"Matching Pairs",icon:"fa-link"},{value:"short_answer",label:"Short Answer",icon:"fa-keyboard"}],G=v(()=>{let o=_.value;if(A.value){const s=h.value.filter(a=>{const c=U.value.find(q=>q.id===a.moduleId);return c&&c.courseId===A.value}).map(a=>a.id);o=o.filter(a=>s.includes(a.lessonId))}if(C.value){const s=h.value.filter(a=>a.moduleId===C.value).map(a=>a.id);o=o.filter(a=>s.includes(a.lessonId))}if($.value&&(o=o.filter(e=>e.lessonId===$.value)),L.value){const e=L.value.toLowerCase();o=o.filter(s=>s.title.toLowerCase().includes(e)||s.instructions&&s.instructions.toLowerCase().includes(e))}return o}),ee=v(()=>A.value?U.value.filter(o=>o.courseId===A.value):[]),te=v(()=>C.value?h.value.filter(o=>o.moduleId===C.value):[]),se=v(()=>l.courseId?U.value.filter(o=>o.courseId===l.courseId):[]),oe=v(()=>l.unitId?h.value.filter(o=>o.moduleId===l.unitId):[]),le=v(()=>l.exercise_type!=="writing"),N=v(()=>l.image_url&&l.image_url.trim()!==""),ne=v(()=>l.exercise_type==="reading"||l.exercise_type==="writing"),R=v(()=>n.question_type==="multiple_choice"||n.question_type==="true_false"),B=v(()=>n.question_type==="fill_in_the_blank"),z=v(()=>n.question_type==="matching"),H=v(()=>n.question_type==="short_answer"),re=async()=>{w.value=!0;try{const o=await V.getAll(),e=o.data||o;_.value=Array.isArray(e)?e:[]}catch(o){x.value=`Failed to fetch exercises: ${o.message||"Unknown error"}`,console.error("Error fetching exercises:",o),_.value=[]}finally{w.value=!1}},ie=async()=>{try{const o=await Me.getAll(),e=o.data||o;M.value=Array.isArray(e)?e:[]}catch(o){console.error("Error fetching courses:",o),M.value=[]}},ae=async()=>{try{const o=await $e.getAll(),e=o.data||o;U.value=Array.isArray(e)?e:[]}catch(o){console.error("Error fetching units:",o),U.value=[]}},ue=async()=>{try{const o=await Te.getAll(),e=o.data||o;h.value=Array.isArray(e)?e:[]}catch(o){console.error("Error fetching lessons:",o),h.value=[]}},de=()=>{I.value=!1,W(),Q.value=!0},ce=o=>{if(I.value=!0,l.id=o.id,l.title=o.title,l.exercise_type=o.exercise_type||"grammar",l.audio_url=o.audio_url||"",l.image_url=o.image_url||"",l.instructions=o.instructions||"",l.content=o.content||"",l.isActive=o.isActive,l.lessonId=o.lessonId,o.lessonId){const e=h.value.find(s=>s.id===o.lessonId);if(e){l.unitId=e.moduleId;const s=U.value.find(a=>a.id===e.moduleId);s&&(l.courseId=s.courseId)}}l.questions=o.questions?[...o.questions]:[],Q.value=!0},F=()=>{Q.value=!1,W()},W=()=>{l.id=null,l.title="",l.exercise_type="grammar",l.audio_url="",l.image_url="",l.instructions="",l.content="",l.isActive=!0,l.courseId="",l.unitId="",l.lessonId="",l.questions=[]},J=()=>{n.id=null,n.question_type="multiple_choice",n.question_text="",n.points=5,n.order_number=1,n.sample_answer="",n.options=[{option_text:"",is_correct:!1},{option_text:"",is_correct:!1}],n.gap_filling=[{gap_number:1,correct_answer:[]}],n.matching=[{left_item:"",right_item:""}],n.typing=[{correct_answer:"",is_case_sensitive:!1}]},K=(o=-1)=>{if(o>=0){E.value=!0,S.value=o;const e=l.questions[o];Object.assign(n,e)}else E.value=!1,S.value=-1,J(),n.order_number=l.questions.length+1;T.value=!0},P=()=>{T.value=!1,J()},pe=()=>{if(!n.question_text.trim()){x.value="Please enter question text";return}const o={question_type:n.question_type,question_text:n.question_text,points:n.points,order_number:n.order_number,sample_answer:n.sample_answer,options:[],gap_filling:[],matching:[],typing:[]};R.value?o.options=n.options.filter(e=>e.option_text.trim()):B.value?o.gap_filling=n.gap_filling:z.value?o.matching=n.matching.filter(e=>e.left_item.trim()&&e.right_item.trim()):H.value&&(o.typing=n.typing),E.value?l.questions[S.value]={...o,id:n.id}:l.questions.push(o),P()},me=o=>{confirm("Are you sure you want to delete this question?")&&(l.questions.splice(o,1),l.questions.forEach((e,s)=>{e.order_number=s+1}))},ge=async()=>{if(!l.title||!l.lessonId){x.value="Please fill in all required fields";return}w.value=!0;try{const o={title:l.title,exercise_type:l.exercise_type,audio_url:l.audio_url||null,image_url:l.image_url||null,instructions:l.instructions,content:l.content,isActive:l.isActive,lessonId:l.lessonId,questions:l.questions};if(I.value){const e=await V.update(l.id,o),s=_.value.findIndex(a=>a.id===l.id);s!==-1&&(_.value[s]={..._.value[s],...e.data||e||o,id:l.id})}else{const e=await V.create(o),s=e.data||e;s&&s.id?_.value.push(s):_.value.push({...o,id:Date.now(),createdAt:new Date().toISOString().split("T")[0],updatedAt:new Date().toISOString().split("T")[0]})}F(),x.value=""}catch(o){x.value=`Failed to save exercise: ${o.message||"Unknown error"}`,console.error("Error saving exercise:",o)}finally{w.value=!1}},fe=async o=>{if(confirm("Are you sure you want to delete this exercise?")){w.value=!0;try{await V.delete(o),_.value=_.value.filter(e=>e.id!==o),x.value=""}catch(e){x.value=`Failed to delete exercise: ${e.message||"Unknown error"}`,console.error("Error deleting exercise:",e)}finally{w.value=!1}}},be=async o=>{const e=o.isActive;try{o.isActive=!o.isActive;const s={...o,isActive:o.isActive};await V.update(o.id,s),x.value=""}catch(s){o.isActive=e,x.value=`Failed to update exercise status: ${s.message||"Unknown error"}`,console.error("Error updating exercise status:",s)}},ye=()=>{n.options.push({option_text:"",is_correct:!1})},ve=o=>{n.options.length>2&&n.options.splice(o,1)},xe=()=>{n.gap_filling.push({gap_number:n.gap_filling.length+1,correct_answer:[]})},_e=o=>{n.gap_filling.length>1&&(n.gap_filling.splice(o,1),n.gap_filling.forEach((e,s)=>{e.gap_number=s+1}))},we=o=>{n.gap_filling[o].correct_answer||(n.gap_filling[o].correct_answer=[]),n.gap_filling[o].correct_answer.push("")},he=(o,e)=>{n.gap_filling[o].correct_answer.length>1&&n.gap_filling[o].correct_answer.splice(e,1)},ke=()=>{n.matching.push({left_item:"",right_item:""})},Ae=o=>{n.matching.length>1&&n.matching.splice(o,1)},Ce=o=>{const e=O.find(s=>s.value===o);return e?e.label:o},qe=o=>{const e=j.find(s=>s.value===o);return e?e.label:o},Ue=o=>{const e=h.value.find(s=>s.id===o);return e?e.title:"Unknown Lesson"},Ie=o=>!o.questions||!Array.isArray(o.questions)?0:o.questions.reduce((e,s)=>e+(s.points||0),0);return Ee(async()=>{await Promise.all([re(),ie(),ae(),ue()])}),(o,e)=>(r(),i("div",Fe,[t("div",{class:"mb-6"},[t("div",{class:"flex justify-between items-center"},[e[26]||(e[26]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"Exercises Management"),t("p",{class:"text-gray-600"},"Manage your course exercises and assessments")],-1)),t("button",{onClick:de,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors"},e[25]||(e[25]=[t("i",{class:"fas fa-plus mr-2"},null,-1),y(" Add Exercise ")]))])]),x.value?(r(),i("div",Pe,d(x.value),1)):p("",!0),t("div",De,[t("div",Oe,[t("div",null,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Search Exercises",-1)),u(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>L.value=s),placeholder:"Search by title or description...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[g,L.value]])]),t("div",null,[e[29]||(e[29]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Filter by Course",-1)),u(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>A.value=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[e[28]||(e[28]=t("option",{value:""},"All Courses",-1)),(r(!0),i(f,null,b(M.value,s=>(r(),i("option",{key:s.id,value:s.id},d(s.title),9,je))),128))],512),[[k,A.value]])]),t("div",null,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Filter by Unit",-1)),u(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>C.value=s),disabled:!A.value,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100"},[e[30]||(e[30]=t("option",{value:""},"All Units",-1)),(r(!0),i(f,null,b(ee.value,s=>(r(),i("option",{key:s.id,value:s.id},d(s.title),9,Ne))),128))],8,Ge),[[k,C.value]])]),t("div",null,[e[33]||(e[33]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Filter by Lesson",-1)),u(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>$.value=s),disabled:!C.value,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100"},[e[32]||(e[32]=t("option",{value:""},"All Lessons",-1)),(r(!0),i(f,null,b(te.value,s=>(r(),i("option",{key:s.id,value:s.id},d(s.title),9,Be))),128))],8,Re),[[k,$.value]])])])]),t("div",ze,[t("div",He,[t("table",We,[e[43]||(e[43]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Exercise "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Type "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Lesson "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Details "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),t("tbody",Je,[w.value?(r(),i("tr",Ke,e[34]||(e[34]=[t("td",{colspan:"6",class:"px-6 py-4 text-center text-gray-500"},[t("i",{class:"fas fa-spinner fa-spin mr-2"}),y(" Loading exercises... ")],-1)]))):G.value.length===0?(r(),i("tr",Xe,e[35]||(e[35]=[t("td",{colspan:"6",class:"px-6 py-4 text-center text-gray-500"}," No exercises found ",-1)]))):(r(!0),i(f,{key:2},b(G.value,s=>(r(),i("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",Ye,[t("div",null,[t("div",Ze,d(s.title),1),s.instructions?(r(),i("div",et,d(s.instructions),1)):p("",!0)])]),t("td",tt,[t("div",st,[t("div",ot,[e[36]||(e[36]=t("i",{class:"fas fa-tag text-blue-500 mr-2"},null,-1)),t("span",lt,d(Ce(s.exercise_type)),1)]),t("div",nt,[e[37]||(e[37]=t("i",{class:"fas fa-question-circle text-green-500 mr-2"},null,-1)),t("span",rt,d(s.questions?s.questions.length:0)+" Questions",1)])])]),t("td",it,[t("div",at,d(Ue(s.lessonId)),1),e[38]||(e[38]=t("div",{class:"text-xs text-gray-400"},"Lesson",-1))]),t("td",ut,[t("div",dt,[t("span",ct,d(Ie(s))+"pts",1),s.audio_url?(r(),i("span",pt,e[39]||(e[39]=[t("i",{class:"fas fa-volume-up mr-1"},null,-1),y("Audio ")]))):p("",!0),s.image_url?(r(),i("span",mt,e[40]||(e[40]=[t("i",{class:"fas fa-image mr-1"},null,-1),y("Image ")]))):p("",!0)])]),t("td",gt,[t("button",{onClick:a=>be(s),class:Se([s.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800","px-2 py-1 text-xs font-medium rounded-full"])},d(s.isActive?"Active":"Inactive"),11,ft)]),t("td",bt,[t("button",{onClick:a=>ce(s),class:"text-indigo-600 hover:text-indigo-900 mr-3"},e[41]||(e[41]=[t("i",{class:"fas fa-edit"},null,-1)]),8,yt),t("button",{onClick:a=>fe(s.id),class:"text-red-600 hover:text-red-900"},e[42]||(e[42]=[t("i",{class:"fas fa-trash"},null,-1)]),8,vt)])]))),128))])])])]),Q.value?(r(),i("div",xt,[t("div",_t,[t("div",wt,[t("div",ht,[t("h3",kt,d(I.value?"Edit Exercise":"Create New Exercise"),1),t("button",{onClick:F,class:"text-gray-400 hover:text-gray-600"},e[44]||(e[44]=[t("i",{class:"fas fa-times"},null,-1)]))]),t("form",{onSubmit:Z(ge,["prevent"]),class:"space-y-4"},[t("div",At,[t("div",null,[e[45]||(e[45]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[y(" Title "),t("span",{class:"text-red-500"},"*")],-1)),u(t("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=s=>l.title=s),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter exercise title"},null,512),[[g,l.title]])]),t("div",null,[e[46]||(e[46]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Exercise Type",-1)),u(t("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>l.exercise_type=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[(r(),i(f,null,b(O,s=>t("option",{key:s.value,value:s.value},d(s.label),9,Ct)),64))],512),[[k,l.exercise_type]])])]),N.value?p("",!0):(r(),i("div",qt,[le.value?(r(),i("div",Ut,[e[47]||(e[47]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Audio URL",-1)),u(t("input",{type:"url","onUpdate:modelValue":e[6]||(e[6]=s=>l.audio_url=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter audio URL"},null,512),[[g,l.audio_url]])])):p("",!0),t("div",null,[e[48]||(e[48]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Image URL",-1)),u(t("input",{type:"url","onUpdate:modelValue":e[7]||(e[7]=s=>l.image_url=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter image URL"},null,512),[[g,l.image_url]])])])),N.value?(r(),i("div",It,[t("div",Et,[e[49]||(e[49]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Exercise Image",-1)),t("div",Vt,[t("img",{src:l.image_url,alt:"Exercise image",class:"max-w-sm max-h-64 rounded-lg border border-gray-300 object-cover",onError:e[8]||(e[8]=s=>l.image_url="")},null,40,Lt),t("button",{type:"button",onClick:e[9]||(e[9]=s=>l.image_url=""),class:"absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-red-600 text-xs"}," Ã— ")])])])):p("",!0),t("div",null,[e[50]||(e[50]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Instructions",-1)),u(t("textarea",{"onUpdate:modelValue":e[10]||(e[10]=s=>l.instructions=s),rows:"2",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter instructions for students"},null,512),[[g,l.instructions]])]),t("div",null,[e[51]||(e[51]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Content",-1)),ne.value?(r(),Ve(Le(Qe),{key:0,content:l.content,"onUpdate:content":e[11]||(e[11]=s=>l.content=s),theme:"snow",toolbar:"full",class:"bg-white",placeholder:"Enter main content/text for the exercise"},null,8,["content"])):u((r(),i("textarea",{key:1,"onUpdate:modelValue":e[12]||(e[12]=s=>l.content=s),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter main content/text for the exercise"},null,512)),[[g,l.content]])]),t("div",Qt,[t("div",null,[e[53]||(e[53]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Course",-1)),u(t("select",{"onUpdate:modelValue":e[13]||(e[13]=s=>l.courseId=s),onChange:e[14]||(e[14]=s=>{l.unitId="",l.lessonId=""}),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[e[52]||(e[52]=t("option",{value:""},"Select Course",-1)),(r(!0),i(f,null,b(M.value,s=>(r(),i("option",{key:s.id,value:s.id},d(s.title),9,Mt))),128))],544),[[k,l.courseId]])]),t("div",null,[e[55]||(e[55]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Unit",-1)),u(t("select",{"onUpdate:modelValue":e[15]||(e[15]=s=>l.unitId=s),onChange:e[16]||(e[16]=s=>l.lessonId=""),disabled:!l.courseId,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100"},[e[54]||(e[54]=t("option",{value:""},"Select Unit",-1)),(r(!0),i(f,null,b(se.value,s=>(r(),i("option",{key:s.id,value:s.id},d(s.title),9,Tt))),128))],40,$t),[[k,l.unitId]])]),t("div",null,[e[57]||(e[57]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[y(" Lesson "),t("span",{class:"text-red-500"},"*")],-1)),u(t("select",{"onUpdate:modelValue":e[17]||(e[17]=s=>l.lessonId=s),disabled:!l.unitId,required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100"},[e[56]||(e[56]=t("option",{value:""},"Select Lesson",-1)),(r(!0),i(f,null,b(oe.value,s=>(r(),i("option",{key:s.id,value:s.id},d(s.title),9,Ft))),128))],8,St),[[k,l.lessonId]])])]),l.exercise_type!=="writing"?(r(),i("div",Pt,[t("div",Dt,[e[59]||(e[59]=t("h4",{class:"text-md font-medium text-gray-900"},"Questions",-1)),t("button",{type:"button",onClick:e[18]||(e[18]=s=>K()),class:"bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm"},e[58]||(e[58]=[t("i",{class:"fas fa-plus mr-1"},null,-1),y("Add Question ")]))]),l.questions.length===0?(r(),i("div",Ot,e[60]||(e[60]=[t("i",{class:"fas fa-question-circle text-gray-400 text-3xl mb-2"},null,-1),t("p",{class:"text-gray-500"},'No questions added yet. Click "Add Question" to start.',-1)]))):(r(),i("div",jt,[(r(!0),i(f,null,b(l.questions,(s,a)=>(r(),i("div",{key:a,class:"border rounded-lg p-4 bg-gray-50"},[t("div",Gt,[t("div",Nt,[t("div",Rt,[t("span",Bt,d(qe(s.question_type)),1),t("span",zt,d(s.points||0)+" points",1),t("span",Ht,"Order: "+d(s.order_number),1)]),t("p",Wt,d(s.question_text||"No question text"),1)]),t("div",Jt,[t("button",{type:"button",onClick:c=>K(a),class:"text-blue-600 hover:text-blue-700 text-sm"},e[61]||(e[61]=[t("i",{class:"fas fa-edit"},null,-1)]),8,Kt),t("button",{type:"button",onClick:c=>me(a),class:"text-red-600 hover:text-red-700 text-sm"},e[62]||(e[62]=[t("i",{class:"fas fa-trash"},null,-1)]),8,Xt)])])]))),128))]))])):p("",!0),t("div",Yt,[u(t("input",{type:"checkbox","onUpdate:modelValue":e[19]||(e[19]=s=>l.isActive=s),id:"isActive",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[D,l.isActive]]),e[63]||(e[63]=t("label",{for:"isActive",class:"ml-2 block text-sm text-gray-900"}," Active ",-1))]),t("div",Zt,[t("button",{type:"button",onClick:F,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"}," Cancel "),t("button",{type:"submit",disabled:w.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50"},[w.value?(r(),i("i",ts)):p("",!0),y(" "+d(I.value?"Update":"Create"),1)],8,es)])],32)])])])):p("",!0),T.value?(r(),i("div",ss,[t("div",os,[t("div",ls,[t("div",ns,[t("h3",rs,d(E.value?"Edit Question":"Add New Question"),1),t("button",{onClick:P,class:"text-gray-400 hover:text-gray-600"},e[64]||(e[64]=[t("i",{class:"fas fa-times"},null,-1)]))]),t("form",{onSubmit:Z(pe,["prevent"]),class:"space-y-4"},[t("div",is,[t("div",null,[e[65]||(e[65]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Question Type",-1)),u(t("select",{"onUpdate:modelValue":e[20]||(e[20]=s=>n.question_type=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[(r(),i(f,null,b(j,s=>t("option",{key:s.value,value:s.value},d(s.label),9,as)),64))],512),[[k,n.question_type]])]),t("div",null,[e[66]||(e[66]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Points",-1)),u(t("input",{type:"number","onUpdate:modelValue":e[21]||(e[21]=s=>n.points=s),min:"1",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[g,n.points]])]),t("div",null,[e[67]||(e[67]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Order",-1)),u(t("input",{type:"number","onUpdate:modelValue":e[22]||(e[22]=s=>n.order_number=s),min:"1",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[g,n.order_number]])])]),t("div",null,[e[68]||(e[68]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[y(" Question Text "),t("span",{class:"text-red-500"},"*")],-1)),u(t("textarea",{"onUpdate:modelValue":e[23]||(e[23]=s=>n.question_text=s),rows:"2",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter the question text"},null,512),[[g,n.question_text]])]),t("div",null,[e[69]||(e[69]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Sample Answer (Optional)",-1)),u(t("input",{type:"text","onUpdate:modelValue":e[24]||(e[24]=s=>n.sample_answer=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter a sample answer or explanation"},null,512),[[g,n.sample_answer]])]),R.value?(r(),i("div",us,[e[73]||(e[73]=t("h5",{class:"text-md font-medium text-gray-900"},"Answer Options",-1)),t("div",ds,[(r(!0),i(f,null,b(n.options,(s,a)=>(r(),i("div",{key:a,class:"flex items-center space-x-2"},[u(t("input",{type:"text","onUpdate:modelValue":c=>s.option_text=c,class:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:`Option ${a+1}`},null,8,cs),[[g,s.option_text]]),t("label",ps,[u(t("input",{type:"checkbox","onUpdate:modelValue":c=>s.is_correct=c,class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,8,ms),[[D,s.is_correct]]),e[70]||(e[70]=t("span",{class:"ml-1 text-sm text-gray-700"},"Correct",-1))]),t("button",{type:"button",onClick:c=>ve(a),disabled:n.options.length<=2,class:"text-red-600 hover:text-red-700 disabled:text-gray-400"},e[71]||(e[71]=[t("i",{class:"fas fa-times"},null,-1)]),8,gs)]))),128)),n.question_type==="multiple_choice"?(r(),i("button",{key:0,type:"button",onClick:ye,class:"w-full px-4 py-2 border border-dashed border-gray-300 rounded-md text-gray-600 hover:border-blue-500 hover:text-blue-600"},e[72]||(e[72]=[t("i",{class:"fas fa-plus mr-2"},null,-1),y("Add Option ")]))):p("",!0)])])):p("",!0),B.value?(r(),i("div",fs,[e[78]||(e[78]=t("h5",{class:"text-md font-medium text-gray-900"},"Gap Answers",-1)),e[79]||(e[79]=t("p",{class:"text-sm text-gray-600"},"Define the correct answers for each gap in your question text.",-1)),t("div",bs,[(r(!0),i(f,null,b(n.gap_filling,(s,a)=>(r(),i("div",{key:a,class:"border rounded-lg p-4 bg-gray-50"},[t("div",ys,[t("h6",vs,"Gap "+d(s.gap_number),1),t("button",{type:"button",onClick:c=>_e(a),disabled:n.gap_filling.length<=1,class:"text-red-600 hover:text-red-700 disabled:text-gray-400 text-sm"},e[74]||(e[74]=[t("i",{class:"fas fa-times mr-1"},null,-1),y("Remove Gap ")]),8,xs)]),t("div",_s,[(r(!0),i(f,null,b(s.correct_answer,(c,q)=>(r(),i("div",{key:q,class:"flex items-center space-x-2"},[u(t("input",{type:"text","onUpdate:modelValue":X=>s.correct_answer[q]=X,class:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:`Correct answer ${q+1}`},null,8,ws),[[g,s.correct_answer[q]]]),t("button",{type:"button",onClick:X=>he(a,q),disabled:s.correct_answer.length<=1,class:"text-red-600 hover:text-red-700 disabled:text-gray-400"},e[75]||(e[75]=[t("i",{class:"fas fa-times"},null,-1)]),8,hs)]))),128)),t("button",{type:"button",onClick:c=>we(a),class:"w-full px-3 py-2 border border-dashed border-gray-300 rounded-md text-gray-600 hover:border-blue-500 hover:text-blue-600 text-sm"},e[76]||(e[76]=[t("i",{class:"fas fa-plus mr-2"},null,-1),y("Add Alternative Answer ")]),8,ks)])]))),128)),t("button",{type:"button",onClick:xe,class:"w-full px-4 py-2 border border-dashed border-gray-300 rounded-md text-gray-600 hover:border-blue-500 hover:text-blue-600"},e[77]||(e[77]=[t("i",{class:"fas fa-plus mr-2"},null,-1),y("Add Gap ")]))])])):p("",!0),z.value?(r(),i("div",As,[e[82]||(e[82]=t("h5",{class:"text-md font-medium text-gray-900"},"Matching Pairs",-1)),t("div",Cs,[(r(!0),i(f,null,b(n.matching,(s,a)=>(r(),i("div",{key:a,class:"grid grid-cols-2 gap-2"},[u(t("input",{type:"text","onUpdate:modelValue":c=>s.left_item=c,class:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Left item"},null,8,qs),[[g,s.left_item]]),t("div",Us,[u(t("input",{type:"text","onUpdate:modelValue":c=>s.right_item=c,class:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Right item"},null,8,Is),[[g,s.right_item]]),t("button",{type:"button",onClick:c=>Ae(a),disabled:n.matching.length<=1,class:"text-red-600 hover:text-red-700 disabled:text-gray-400"},e[80]||(e[80]=[t("i",{class:"fas fa-times"},null,-1)]),8,Es)])]))),128)),t("button",{type:"button",onClick:ke,class:"w-full px-4 py-2 border border-dashed border-gray-300 rounded-md text-gray-600 hover:border-blue-500 hover:text-blue-600"},e[81]||(e[81]=[t("i",{class:"fas fa-plus mr-2"},null,-1),y("Add Pair ")]))])])):p("",!0),H.value?(r(),i("div",Vs,[e[84]||(e[84]=t("h5",{class:"text-md font-medium text-gray-900"},"Typing Answer",-1)),t("div",Ls,[(r(!0),i(f,null,b(n.typing,(s,a)=>(r(),i("div",{key:a},[t("div",Qs,[u(t("input",{type:"text","onUpdate:modelValue":c=>s.correct_answer=c,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Correct answer"},null,8,Ms),[[g,s.correct_answer]]),t("label",$s,[u(t("input",{type:"checkbox","onUpdate:modelValue":c=>s.is_case_sensitive=c,class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,8,Ts),[[D,s.is_case_sensitive]]),e[83]||(e[83]=t("span",{class:"ml-2 text-sm text-gray-700"},"Case Sensitive",-1))])])]))),128))])])):p("",!0),t("div",Ss,[t("button",{type:"button",onClick:P,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"}," Cancel "),t("button",Fs,d(E.value?"Update Question":"Add Question"),1)])],32)])])])):p("",!0)]))}};export{Os as default};
