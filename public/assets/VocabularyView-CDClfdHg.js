import{g as d,p as O,h as E,i as Q,c as r,b as t,k as C,e as v,t as a,q as c,v as k,x as S,F as V,l as h,j as F,s as N,J as A,z as R,u as G,o as n,n as H}from"./index-klw2IyYl.js";const K={class:"p-6"},X={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4"},Y={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},Z={class:"bg-white p-6 rounded-lg shadow"},ee={class:"flex items-center"},te={class:"ml-4"},le={class:"text-2xl font-bold text-gray-800"},oe={class:"bg-white p-6 rounded-lg shadow"},se={class:"flex items-center"},ae={class:"ml-4"},re={class:"text-2xl font-bold text-gray-800"},ne={class:"bg-white p-6 rounded-lg shadow"},ie={class:"flex items-center"},de={class:"ml-4"},ue={class:"text-2xl font-bold text-gray-800"},ce={class:"bg-white rounded-lg shadow mb-6"},be={class:"p-6 border-b border-gray-200"},ve={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},ge=["value"],pe={key:1,class:"flex justify-center py-12"},fe={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},xe={key:0,class:"col-span-full text-center py-12"},ye={class:"text-gray-500"},me=["onClick"],we={class:"flex items-center justify-between mb-4"},Ce={class:"text-lg font-semibold text-gray-800 mb-2"},ke={class:"text-gray-600 text-sm mb-2"},Se={class:"mb-4 space-y-1"},Ae={key:0,class:"text-sm text-blue-600"},_e={class:"text-sm text-gray-500"},Ve={class:"text-xs text-gray-400 mb-4"},he=["onClick"],Ue=["onClick"],Be=["onClick"],Le={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Me={class:"bg-white rounded-lg p-6 w-full max-w-md"},Ee={class:"text-lg font-semibold mb-4"},Fe={class:"mb-4"},Ne={class:"mb-4"},Te={class:"mb-4"},Ie={class:"mb-4"},je=["value"],De={class:"mb-4"},Pe={class:"flex space-x-3"},$e=["disabled"],We={__name:"VocabularyView",setup(qe){const T=G(),i=d([]),y=d([]),b=d(!1),u=d(null),p=d(""),m=d(""),f=d(""),w=d(!1),g=d(null),s=O({id:null,title:"",description:"",topic:"",level:"A1",course_id:""}),U=E(()=>{let o=i.value;if(p.value){const e=p.value.toLowerCase();o=o.filter(l=>l.title.toLowerCase().includes(e)||l.description?.toLowerCase().includes(e))}return m.value&&(o=o.filter(e=>e.level===m.value)),f.value&&(o=o.filter(e=>e.course_id===f.value||String(e.course_id)===String(f.value))),o}),_=E(()=>{const o=i.value.length,e=i.value.reduce((x,J)=>x+(J.wordCount||0),0),l=o>0?Math.round(e/o):0;return{totalSets:o,totalWords:e,avgPerSet:l}}),I=async()=>{b.value=!0,u.value=null;try{const o=await A.getAll();i.value=Array.isArray(o)?o:o.data||[]}catch(o){console.error("Error loading vocabulary sets:",o),u.value="Failed to load vocabulary sets"}finally{b.value=!1}},j=async()=>{try{const o=await R.getAll();y.value=Array.isArray(o)?o:o.data||[]}catch(o){console.error("Error loading courses:",o),u.value="Failed to load courses"}},B=()=>{s.id=null,s.title="",s.description="",s.topic="",s.level="A1",s.course_id=""},D=()=>{B(),g.value=null,w.value=!0},P=o=>{Object.assign(s,o),g.value=o,w.value=!0},L=()=>{w.value=!1,g.value=null,B()},$=async()=>{b.value=!0,u.value=null;try{if(g.value){const o=await A.update(s.id,s),e=i.value.findIndex(l=>l.id===s.id);e>-1&&(i.value[e]=o)}else{const o=await A.create(s);i.value.unshift(o)}L()}catch(o){console.error("Error saving vocabulary set:",o),u.value="Failed to save vocabulary set"}finally{b.value=!1}},q=async o=>{if(confirm(`Are you sure you want to delete "${o.title}"?`))try{await A.delete(o.id);const e=i.value.findIndex(l=>l.id===o.id);e>-1&&i.value.splice(e,1)}catch(e){console.error("Error deleting vocabulary set:",e),u.value="Failed to delete vocabulary set"}},z=o=>({A1:"bg-green-100 text-green-800",A2:"bg-blue-100 text-blue-800",B1:"bg-yellow-100 text-yellow-800",B2:"bg-orange-100 text-orange-800",C1:"bg-red-100 text-red-800",C2:"bg-purple-100 text-purple-800"})[o]||"bg-gray-100 text-gray-800",W=o=>{const e=y.value.find(l=>l.id===o||l.id===String(o)||String(l.id)===String(o));return e?e.name||e.title||"Unknown Course":"No Course"},M=o=>{T.push(`/vocabulary-items/${o}`)};return Q(()=>{I(),j()}),(o,e)=>(n(),r("div",K,[t("div",{class:"mb-6"},[t("div",{class:"flex justify-between items-center"},[e[10]||(e[10]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"Vocabulary Sets"),t("p",{class:"text-gray-600"},"Manage vocabulary collections for your lessons")],-1)),t("button",{onClick:D,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors"},e[9]||(e[9]=[t("i",{class:"fas fa-plus mr-2"},null,-1),v("Create Vocabulary Set ")]))])]),u.value?(n(),r("div",X,a(u.value),1)):C("",!0),t("div",Y,[t("div",Z,[t("div",ee,[e[12]||(e[12]=t("div",{class:"p-3 bg-blue-500 rounded-full"},[t("i",{class:"fas fa-book-open text-white text-xl"})],-1)),t("div",te,[e[11]||(e[11]=t("p",{class:"text-sm text-gray-600"},"Total Sets",-1)),t("p",le,a(_.value.totalSets),1)])])]),t("div",oe,[t("div",se,[e[14]||(e[14]=t("div",{class:"p-3 bg-green-500 rounded-full"},[t("i",{class:"fas fa-list text-white text-xl"})],-1)),t("div",ae,[e[13]||(e[13]=t("p",{class:"text-sm text-gray-600"},"Total Words",-1)),t("p",re,a(_.value.totalWords.toLocaleString()),1)])])]),t("div",ne,[t("div",ie,[e[16]||(e[16]=t("div",{class:"p-3 bg-yellow-500 rounded-full"},[t("i",{class:"fas fa-chart-line text-white text-xl"})],-1)),t("div",de,[e[15]||(e[15]=t("p",{class:"text-sm text-gray-600"},"Avg per Set",-1)),t("p",ue,a(_.value.avgPerSet),1)])])])]),t("div",ce,[t("div",be,[t("div",ve,[t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Search",-1)),c(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=l=>p.value=l),placeholder:"Search vocabulary sets...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[k,p.value]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Course",-1)),c(t("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>f.value=l),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},[e[18]||(e[18]=t("option",{value:""},"All Courses",-1)),(n(!0),r(V,null,h(y.value,l=>(n(),r("option",{key:l.id,value:l.id},a(l.name||l.title||"Unnamed Course"),9,ge))),128))],512),[[S,f.value]])]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Level",-1)),c(t("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>m.value=l),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},e[20]||(e[20]=[F('<option value="">All Levels</option><option value="A1">A1 - Beginner</option><option value="A2">A2 - Elementary</option><option value="B1">B1 - Intermediate</option><option value="B2">B2 - Upper Intermediate</option><option value="C1">C1 - Advanced</option><option value="C2">C2 - Proficient</option>',7)]),512),[[S,m.value]])])])])]),b.value?(n(),r("div",pe,e[22]||(e[22]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)]))):(n(),r("div",fe,[U.value.length===0?(n(),r("div",xe,[e[23]||(e[23]=t("div",{class:"text-gray-400 mb-4"},[t("i",{class:"fas fa-book-open text-6xl"})],-1)),e[24]||(e[24]=t("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No vocabulary sets found",-1)),t("p",ye,a(p.value?"Try adjusting your search criteria":"Create your first vocabulary set to get started"),1)])):C("",!0),(n(!0),r(V,null,h(U.value,l=>(n(),r("div",{key:l.id,class:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:x=>M(l.id)},[t("div",we,[e[25]||(e[25]=t("div",{class:"p-3 bg-blue-100 rounded-full"},[t("i",{class:"fas fa-book text-blue-600 text-xl"})],-1)),t("span",{class:H(z(l.level)+" px-2 py-1 text-xs font-medium rounded-full")},a(l.level||"Unknown"),3)]),t("h3",Ce,a(l.title),1),t("p",ke,a(l.description||"No description available"),1),t("div",Se,[l.topic?(n(),r("p",Ae,[e[26]||(e[26]=t("i",{class:"fas fa-tag mr-1"},null,-1)),v(a(l.topic),1)])):C("",!0),t("p",_e,[e[27]||(e[27]=t("i",{class:"fas fa-book mr-1"},null,-1)),v(a(W(l.course_id)),1)])]),t("div",Ve,[t("p",null,"Created: "+a(l.createdAt?new Date(l.createdAt).toLocaleDateString():"Unknown"),1),t("p",null,"Last updated: "+a(l.updatedAt?new Date(l.updatedAt).toLocaleDateString():"Unknown"),1)]),t("div",{class:"flex space-x-2",onClick:e[3]||(e[3]=N(()=>{},["stop"]))},[t("button",{class:"flex-1 bg-blue-600 text-white py-2 px-3 rounded-lg hover:bg-blue-700 text-sm",onClick:x=>M(l.id)},e[28]||(e[28]=[t("i",{class:"fas fa-cog mr-1"},null,-1),v("Manage ")]),8,he),t("button",{class:"flex-1 bg-gray-200 text-gray-700 py-2 px-3 rounded-lg hover:bg-gray-300 text-sm",onClick:x=>P(l)},e[29]||(e[29]=[t("i",{class:"fas fa-edit mr-1"},null,-1),v("Edit ")]),8,Ue),t("button",{class:"bg-red-100 text-red-600 py-2 px-3 rounded-lg hover:bg-red-200 text-sm",onClick:x=>q(l)},e[30]||(e[30]=[t("i",{class:"fas fa-trash"},null,-1)]),8,Be)])],8,me))),128))])),w.value?(n(),r("div",Le,[t("div",Me,[t("h3",Ee,a(g.value?"Edit Vocabulary Set":"Create New Vocabulary Set"),1),t("form",{onSubmit:N($,["prevent"])},[t("div",Fe,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Title",-1)),c(t("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>s.title=l),type:"text",class:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},null,512),[[k,s.title]])]),t("div",Ne,[e[32]||(e[32]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),c(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=l=>s.description=l),rows:"3",class:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[k,s.description]])]),t("div",Te,[e[33]||(e[33]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Topic",-1)),c(t("input",{"onUpdate:modelValue":e[6]||(e[6]=l=>s.topic=l),type:"text",class:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Animals, Food, Transportation"},null,512),[[k,s.topic]])]),t("div",Ie,[e[35]||(e[35]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[v("Course "),t("span",{class:"text-red-500"},"*")],-1)),c(t("select",{"onUpdate:modelValue":e[7]||(e[7]=l=>s.course_id=l),class:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},[e[34]||(e[34]=t("option",{value:""},"Select Course",-1)),(n(!0),r(V,null,h(y.value,l=>(n(),r("option",{key:l.id,value:l.id},a(l.name||l.title||"Unnamed Course"),9,je))),128))],512),[[S,s.course_id]])]),t("div",De,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[v("Level "),t("span",{class:"text-red-500"},"*")],-1)),c(t("select",{"onUpdate:modelValue":e[8]||(e[8]=l=>s.level=l),class:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},e[36]||(e[36]=[F('<option value="">Select Level</option><option value="A1">A1 - Beginner</option><option value="A2">A2 - Elementary</option><option value="B1">B1 - Intermediate</option><option value="B2">B2 - Upper Intermediate</option><option value="C1">C1 - Advanced</option><option value="C2">C2 - Proficient</option>',7)]),512),[[S,s.level]])]),t("div",Pe,[t("button",{type:"button",onClick:L,class:"flex-1 px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300"}," Cancel "),t("button",{type:"submit",disabled:b.value,class:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50"},a(b.value?"Saving...":g.value?"Update":"Create"),9,$e)])],32)])])):C("",!0)]))}};export{We as default};
