import{g as v,p as j,h as z,i as E,c as r,b as e,k as h,e as S,j as _,q as x,v as b,t as n,F,l as D,s as N,x as I,y as $,z as y,o as i,n as w}from"./index-klw2IyYl.js";const q={class:"max-w-6xl mx-auto p-6 bg-white min-h-screen"},H={class:"flex justify-between items-center mb-6"},T={class:"flex items-center gap-4"},R=["disabled"],O={class:"flex items-center gap-2"},P={key:0,class:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg"},Q={class:"flex items-center"},G={class:"text-red-700"},J={key:1,class:"flex justify-center py-12"},K={key:2,class:"bg-white rounded-lg shadow overflow-hidden"},W={class:"overflow-x-auto"},X={class:"min-w-full divide-y divide-gray-200"},Y={class:"bg-white divide-y divide-gray-200"},Z={key:0},ee={colspan:"6",class:"px-6 py-12 text-center text-gray-500"},te={class:"text-sm"},se={class:"px-6 py-4 whitespace-nowrap"},le={class:"flex items-center"},oe={class:"flex-shrink-0 h-12 w-12"},re=["src","alt"],ie={key:1,class:"h-12 w-12 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center"},ae={class:"ml-4"},ne={class:"text-sm font-medium text-gray-900"},de={class:"text-sm text-gray-500 max-w-xs truncate"},ue={class:"px-6 py-4 whitespace-nowrap"},ce={class:"px-6 py-4 whitespace-nowrap"},pe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ve={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},xe={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},ge={class:"flex justify-end gap-2"},ye=["onClick"],me=["onClick","title"],be={key:0,class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},fe={key:1,class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},he=["onClick"],we={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},ke={class:"bg-white rounded-lg max-w-2xl w-full max-h-90vh overflow-y-auto"},Ce={class:"p-6 border-b"},_e={class:"flex justify-between items-center"},Ae={class:"text-xl font-semibold"},Me={class:"p-6"},Be={class:"flex items-center"},Ue={class:"flex justify-end gap-2 pt-4"},Le=["disabled"],ze={__name:"CoursesView",setup(Ve){const a=v([]),u=v(!1),d=v(null),g=v(""),m=v(!1),c=v(null),o=j({id:null,title:"",description:"",imageUrl:"",level:"A1",isActive:!0}),k=z(()=>{if(!g.value)return a.value;const l=g.value.toLowerCase();return a.value.filter(t=>t.title.toLowerCase().includes(l)||t.description?.toLowerCase().includes(l))}),A=l=>({A1:"bg-green-100 text-green-800",A2:"bg-yellow-100 text-yellow-800",B1:"bg-red-100 text-red-800",B2:"bg-blue-100 text-blue-800"})[l]||"bg-gray-100 text-gray-800",C=async()=>{u.value=!0,d.value=null;try{const l=await y.getAll();a.value=l}catch(l){console.error("Error loading courses:",l),d.value="Failed to load courses"}finally{u.value=!1}},M=()=>{o.id=null,o.title="",o.description="",o.imageUrl="",o.level="A1",o.isActive=!0},B=l=>{Object.assign(o,l),c.value=l,m.value=!1},f=()=>{m.value=!1,c.value=null,M()},U=async()=>{u.value=!0,d.value=null;try{if(c.value){const l=await y.update(o.id,o),t=a.value.findIndex(s=>s.id===o.id);t>-1&&(a.value[t]=l)}else{const l=await y.create(o);a.value.unshift(l)}f()}catch(l){console.error("Error saving course:",l),d.value="Failed to save course"}finally{u.value=!1}},L=async l=>{try{const t=await y.update(l.id,{...l,isActive:!l.isActive}),s=a.value.findIndex(p=>p.id===l.id);s>-1&&(a.value[s]=t)}catch(t){console.error("Error updating course status:",t),d.value="Failed to update course status"}},V=async l=>{if(confirm(`Are you sure you want to delete "${l.title}"?`))try{await y.delete(l.id);const t=a.value.findIndex(s=>s.id===l.id);t>-1&&a.value.splice(t,1)}catch(t){console.error("Error deleting course:",t),d.value="Failed to delete course"}};return E(()=>{C()}),(l,t)=>(i(),r("div",q,[t[29]||(t[29]=e("div",{class:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6 rounded-lg mb-6"},[e("h1",{class:"text-3xl font-bold mb-2"},"Courses Management"),e("p",{class:"text-blue-100"},"Create and manage your courses")],-1)),e("div",H,[e("div",T,[e("button",{onClick:t[0]||(t[0]=s=>m.value=!0),class:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition flex items-center gap-2"},t[9]||(t[9]=[e("svg",{class:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"m12 5v14m-7-7h14"})],-1),S(" Add Course ")])),e("button",{onClick:C,disabled:u.value,class:"bg-blue-600 text-white px-6 flex items-center py-2 rounded-lg hover:bg-blue-700 transition disabled:opacity-50"},t[10]||(t[10]=[_('<svg class="w-4 h-4 mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path><path d="M21 3v5h-5"></path><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"></path><path d="M3 21v-5h5"></path></svg> Refresh ',2)]),8,R)]),e("div",O,[x(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>g.value=s),type:"text",placeholder:"Search courses...",class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[b,g.value]])])]),d.value?(i(),r("div",P,[e("div",Q,[t[12]||(t[12]=e("svg",{class:"w-5 h-5 text-red-400 mr-2",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})],-1)),e("span",G,n(d.value),1),e("button",{onClick:t[2]||(t[2]=s=>d.value=null),class:"ml-auto text-red-400 hover:text-red-600"},t[11]||(t[11]=[e("svg",{class:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)]))])])):h("",!0),u.value?(i(),r("div",J,t[13]||(t[13]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)]))):(i(),r("div",K,[e("div",W,[e("table",X,[t[21]||(t[21]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Course"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Level"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Created"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Units"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Y,[k.value.length===0?(i(),r("tr",Z,[e("td",ee,[t[14]||(t[14]=e("svg",{class:"w-12 h-12 mx-auto mb-4 text-gray-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),e("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})],-1)),t[15]||(t[15]=e("p",{class:"text-lg font-medium mb-2"},"No courses found",-1)),e("p",te,n(g.value?"Try adjusting your search terms":"Create your first course to get started"),1)])])):h("",!0),(i(!0),r(F,null,D(k.value,s=>(i(),r("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",se,[e("div",le,[e("div",oe,[s.imageUrl?(i(),r("img",{key:0,src:s.imageUrl,alt:s.title,class:"h-12 w-12 rounded-lg object-cover",onError:t[3]||(t[3]=p=>p.target.style.display="none")},null,40,re)):(i(),r("div",ie,t[16]||(t[16]=[e("svg",{class:"w-6 h-6 text-white",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),e("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})],-1)])))]),e("div",ae,[e("div",ne,n(s.title),1),e("div",de,n(s.description||"No description"),1)])])]),e("td",ue,[e("span",{class:w([A(s.level),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},n(s.level?s.level.charAt(0).toUpperCase()+s.level.slice(1):"Unknown"),3)]),e("td",ce,[e("span",{class:w([s.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800","inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},n(s.isActive?"Active":"Inactive"),3)]),e("td",pe,n(s.createdAt?new Date(s.createdAt).toLocaleDateString():"Unknown"),1),e("td",ve,n(s.unitCount||0)+" units ",1),e("td",xe,[e("div",ge,[e("button",{onClick:p=>B(s),class:"text-blue-600 hover:text-blue-900 p-1",title:"Edit"},t[17]||(t[17]=[e("svg",{class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M7 7H6a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2-2v-1"}),e("path",{d:"M20.385 6.585a2.1 2.1 0 0 0-2.97-2.97L9 12v3h3l8.385-8.415z"}),e("path",{d:"m16 5 3 3"})],-1)]),8,ye),e("button",{onClick:p=>L(s),class:w([s.isActive?"text-gray-600 hover:text-gray-900":"text-green-600 hover:text-green-900","p-1"]),title:s.isActive?"Deactivate":"Activate"},[s.isActive?(i(),r("svg",be,t[18]||(t[18]=[e("path",{d:"M10 9V6a4 4 0 1 1 8 0v3"},null,-1),e("rect",{x:"8",y:"9",width:"12",height:"9",rx:"2"},null,-1)]))):(i(),r("svg",fe,t[19]||(t[19]=[e("rect",{x:"8",y:"9",width:"12",height:"9",rx:"2"},null,-1),e("path",{d:"M16 9V6a4 4 0 0 0-8 0v3"},null,-1)])))],10,me),e("button",{onClick:p=>V(s),class:"text-red-600 hover:text-red-900 p-1",title:"Delete"},t[20]||(t[20]=[_('<svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3,6 5,6 21,6"></polyline><path d="m19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line></svg>',1)]),8,he)])])]))),128))])])])])),m.value||c.value?(i(),r("div",we,[e("div",ke,[e("div",Ce,[e("div",_e,[e("h3",Ae,n(c.value?"Edit Course":"Create New Course"),1),e("button",{onClick:f,class:"text-gray-400 hover:text-gray-600"},t[22]||(t[22]=[e("svg",{class:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("line",{x1:"18",x2:"6",y1:"6",y2:"18"}),e("line",{x1:"6",x2:"18",y1:"6",y2:"18"})],-1)]))])]),e("div",Me,[e("form",{onSubmit:N(U,["prevent"]),class:"space-y-4"},[e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Title",-1)),x(e("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=s=>o.title=s),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter course title"},null,512),[[b,o.title]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),x(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=s=>o.description=s),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter course description"},null,512),[[b,o.description]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Level",-1)),x(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>o.level=s),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"},t[25]||(t[25]=[e("option",{value:"A1"},"A1",-1),e("option",{value:"A2"},"A2",-1),e("option",{value:"B1"},"B1",-1),e("option",{value:"B2"},"B2",-1)]),512),[[I,o.level]])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Image URL",-1)),x(e("input",{type:"url","onUpdate:modelValue":t[7]||(t[7]=s=>o.imageUrl=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://example.com/image.jpg"},null,512),[[b,o.imageUrl]])]),e("div",null,[e("label",Be,[x(e("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=s=>o.isActive=s),class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[$,o.isActive]]),t[28]||(t[28]=e("span",{class:"ml-2 text-sm text-gray-700"},"Course is active",-1))])]),e("div",Ue,[e("button",{type:"button",onClick:f,class:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition"}," Cancel "),e("button",{type:"submit",disabled:u.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition disabled:opacity-50"},n(u.value?"Saving...":c.value?"Update":"Create"),9,Le)])],32)])])])):h("",!0)]))}};export{ze as default};
